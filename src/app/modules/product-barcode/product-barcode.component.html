<div class="body-wrapper-card card">
	<div class="product-barcode-body">
		<div class="d-flex align-items-center justify-content-between">
			<span class="txt-light font-11" *ngIf="sku == ''">Please start typing to get the list of products for
				generating
				barcode</span>
			<span class="txt-light font-11" *ngIf="sku != ''">Please set quantity of the product to generate
				barcode</span>
		</div>
		<form class="mt-3" (ngSubmit)="onSubmit()" #form="ngForm">
			<div class="row">
				<div class="col-md-12">
					<div class="form-group mx-5">
						<i class='bx bx-search-alt p-search font-15 txt-light'></i>

						<input type="text" class="form-control" name="searchProduct" id="searchProduct"
							placeholder="Search product by name or SKU" #searchProductText
							(keyup)="onKeyProductSearch($event)" [disabled]="sku && sku != ''" autocomplete="off">
						<span *ngIf="noMatchFound !=''" class="noMatch-txt">{{noMatchFound}}</span>
						<div class="dropdown-menu " [class.show]="lstProduct && lstProduct.length > 0">
							<div class="dropdown-table">
								<table>
									<thead>
										<tr>
											<th>Product</th>
											<th>Quantity</th>
											<th>Price</th>
										</tr>
									</thead>
									<tbody>
										<tr *ngFor="let product of lstProduct"
											(click)="productAddToGenerateBarcode(product)">
											<td>{{product.ProductName}}</td>
											<td>{{product.Qty}}</td>
											<td>{{product.PurchasePrice | currency: 'BDT':
												'symbol':'1.2-2':'bn-BD'}}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
			<section class="table__body mt-3">
				<table>
					<thead>
						<tr>
							<th>SL</th>
							<th>Product</th>
							<th>Quantity</th>
							<th>Purchase Price / Unit (&#2547;)</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr *ngIf="objBarcode.lstProduct.length == 0">
							<td colspan="6">
								<div class="txt-light text-center ">No product added</div>
							</td>
						</tr>
						<tr *ngFor="let product of objBarcode.lstProduct; let i = index">
							<td>{{i+1}}</td>
							<td>
								<input type="text" name="productName" id="productName" class="form-control"
									[value]="product.ProductName" disabled>
							</td>
							<td>
								<div class="number-input">
									<button type="button" class="number-field-btn minus"
										(click)="decrementValue($event, product)">-</button>
									<input type="number" id="quantity_{{product.SKU}}" name="quantity_{{product.SKU}}"
										class="form-control" [(ngModel)]="product.BarcodeQty" [min]="1"
										[max]="product.Qty" (input)="changeQty($event, product)">
									<button type="button" class="number-field-btn plus"
										(click)="incrementValue($event, product)">+</button>
								</div>
							</td>
							<td>
								<input type="text" name="purchasePrice" id="purchasePrice" class="form-control"
									[value]="product.FinalPrice | number: '1.2-2'" disabled>
							</td>

							<td>
								<button type="button" class="removeFromList-btn" (click)="clickToRemoveFromList(i)">
									<span class="font-35 weight-300">-</span>
								</button>
							</td>
						</tr>
					</tbody>
				</table>
			</section>
			<!-- <div class="d-flex align-items-center gap-3">
				<div class="form-group d-flex align-items-center gap-2">
					<label for="rows" class="form-label">
						No. of Rows
					</label>
					<div class="number-input">
						<button type="button" class="number-field-btn minus" (click)="decrementValue($event)">-</button>
						<input type="number" id="rows" name="rows" class="form-control" [(ngModel)]="rowsNumber"
							#rows="ngModel" [value]="0" [min]="0" [max]="10"
							[ngClass]="{ 'is-invalid': form.submitted && rows.errors }" required>
						<button type="button" class="number-field-btn plus" (click)="incrementValue($event)">+</button>
					</div>
					<div *ngIf="rows.errors && (rows.dirty || form.submitted) && rows.invalid" class="invalid-feedback">
						<div *ngIf="rows.errors['required']">Rows field is required</div>
					</div>
				</div>
				<div class="form-group d-flex align-items-center gap-2">
					<label for="columns" class="form-label">
						No. of Columns
					</label>
					<div class="number-input">
						<button type="button" class="number-field-btn minus" (click)="decrementValue($event)">-</button>
						<input type="number" id="columns" name="columns" class="form-control"
							[(ngModel)]="columnsNumber" #columns="ngModel" [value]="0" [min]="0" [max]="10"
							[ngClass]="{ 'is-invalid': form.submitted && columns.errors }" required>
						<button type="button" class="number-field-btn plus" (click)="incrementValue($event)">+</button>
					</div>
					<div *ngIf="columns.errors && (columns.dirty || form.submitted) && columns.invalid"
						class="invalid-feedback">
						<div *ngIf="columns.errors['required']">Columns field is required</div>
					</div>
				</div>
			</div> -->
			<div class="button-group d-flex align-items-center gap-3 mt-3">
				<button type="submit" class="theme-button">Generate</button>
				<button type="button" class="danger-button d-flex align-items-center gap-2" (click)="resetBarcode()"
					[disabled]="objBarcode.sku!.length == 0">
					<i class='bx bx-reset font-15'></i>
					Reset
				</button>
				<button type="button" class="secondary-theme-button d-flex align-items-center gap-2"
					[disabled]="objBarcode.sku!.length == 0">
					<i class='bx bxs-printer font-15'></i>
					Print
				</button>
			</div>
		</form>

		<div class="barcodes-view mt-3 mb-2">
			<div class="barcode-container" *ngFor="let sku of objBarcode.sku">
				<div class="barcode-body" *ngFor="let value of sku.lstSku">
					<b class="font-11 pt-2">Price: {{value.price | currency:'BDT':'symbol':'1.2-2':'bn-BD'}}</b>
					<div class="font-10">{{value.name}}</div>
					<ngx-barcode [bc-width]="1.25" [bc-height]="50" [bc-font-size]="13" [bc-value]="value.sku"
						[bc-display-value]="true" class="barcode-item"></ngx-barcode>
				</div>
			</div>
		</div>
	</div>
</div>